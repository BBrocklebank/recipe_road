{% extends "base.html" %}
{% block content %}


<main>
    <div class="row">
        <div class="col s12 m10 xl8 offset-m1 offset-xl2">
            <div class="card-panel">
                <h3 class="center-align profile_title black-text text-shadow">
                    {{ user.first_name.capitalize() }}'s Profile
                </h3>
                <br>
                <h4>Details:</h4>

                <!-- Edit Details Form -->
            <div class="row">
                <form class="col s12 form" method="POST" action="{{ url_for('edit_profile', user_id=user._id) }}"
                    name="profile_form">
                    <!-- First Name -->
                    <div class="row form_name">
                        <div class="input-field col s6">
                            <input id="first_name" name="first_name" type="text" minlength="2"
                                maxlength='13' class="validate" value="{{ user.first_name.capitalize() }}"
                                    pattern='^[a-zA-Z]{2,13}$' readonly="readonly" required>
                            <label for="first_name">First Name</label>
                        </div>
                        <!-- Last Name -->
                        <div class="input-field col s6">
                            <input id="last_name" name="last_name" type="text" minlength="2" maxlength='15'
                                class="validate" value="{{ user.last_name.capitalize() }}" pattern='^[a-zA-Z]{2,13}$'
                                    readonly="readonly" required>
                            <label for="last_name">Last Name</label>
                        </div>
                    </div>
                    <!-- Username -->
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="username" name="username" type="text" minlength="5" maxlength='15'
                                class="validate" value="{{ user.username }}" pattern='^[a-zA-Z0-9]{5,15}$'
                                    readonly="readonly" required>
                            <label for="username">Username</label>
                        </div>
                    </div>
                    <!-- Email  -->
                    <div class="row form_email">
                        <div class="input-field col s12">
                            <input id="email" name="email" type="email" class="validate"
                                value="{{ user.email }}"  readonly="readonly" required>
                            <label for="email">Email</label>
                        </div>
                    </div>
                    <!-- Edit/Submit/Password Change -->
                    <div class="row submit-btn">
                        <button class="btn-flat waves-effect light-green" type="submit">
                            <h6 class="profile_btn">Save Changes</h6>
                        </button>
                        <a class="btn-flat waves-effect profile_edit">
                            <h6 class="profile_btn">Edit Details</h6>
                        </a>
                        <a class="btn-flat waves-effect yellow right">
                            <h6 class="profile_btn">Change Password</h6>
                        </a>
                    </div>
                </form>


            </div>
        </div>
    </div>
</main>

<div class="row">
    <div class="col s12 m10 xl8 offset-m1 offset-xl2">
            <h3 class="center-align your_recipes profile_title text-shadow red-text">
                Your Recipes
            </h3>
            <div class="divider"></div>
    </div>
</div>

{% if session.user %}
<span>HELLO WORLD</span>
{% endif %}

{% if session.user %}
<span>HELLO WORLD</span>
{% endif %}

{% for recipe in recipes %}
{% if session.user|lower == recipe.created_by|lower or 'admin' %}
<section>
    <div class="row">
        <div class="col s12 m10 offset-m1">
            <ul class="collapsible">
                <li>
                    <div class="collapsible-header white-text red lighten-1 text-shadow">
                    <i class="fas fa-caret-down"></i>
                    <strong class="flow-text yellow-text">
                        {{ recipe.recipe_name}}:
                    </strong>
                    &nbsp;&nbsp;
                    <em class="flow-text">
                        by
                    </em>
                    &nbsp;&nbsp;
                    <div class="chip flow-text">
                        <img src="{{ url_for('static', filename='images/bluethemedark.png') }}" alt="user avatar">
                        {{ recipe.created_by }}
                    </div>
                    </div>
                    <div class="collapsible-body">
                        <div class="row">
                            <div class='col s12 m10 offset-m1 xl10 offset-xl1'>
                                <!-- Title -->
                                <div class="row red-text center-align flow-text">
                                    <strong>{{ recipe.recipe_name }}</strong>
                                </div>
                                <br>
                                <!-- Desciption -->
                                <div class="row center-align flow-text">
                                    <p>{{ recipe.recipe_description }}</p>
                                </div>
                                <br>
                                <br>
                                <!-- Serves -->
                                <div class="row">
                                    <i class="fas fa-utensils flow-text">&nbsp;&nbsp;Serves:&nbsp;{{ recipe.serves }}</i>
                                </div>
                                <br>
                                <br>
                                <!-- Requirements -->
                                <div class="row">
                                    <i class="fas fa-tools flow-text">&nbsp;&nbsp;Requirements:</i>
                                    <ul class="recipe_list">
                                    {% for requirement in recipe.requirements %}
                                        <li class="recipe_li">
                                        <div class="chip chip_collapsible">
                                            <p class="flow-text">{{ requirement.capitalize() }}</p>
                                        </div>
                                        </li>
                                    {% endfor %}
                                    </ul>
                                </div>
                                <br>
                                <br>
                                <!-- Ingredients -->
                                <div class="row">
                                    <i class="fas fa-carrot flow-text">&nbsp;&nbsp;Ingredients:</i>
                                    <ul class="recipe_list">
                                    {% for ingredient in recipe.ingredients %}
                                        <li class="recipe_li">
                                        <div class="chip chip_collapsible">
                                            <p class="flow-text">{{ ingredient.capitalize() }}</p>
                                        </div>
                                        </li>
                                    {% endfor %}
                                    </ul>
                                </div>
                                <br>
                                <br>
                                <!-- Steps -->
                                <div class="row">
                                    <i class="fas fa-list flow-text">&nbsp;&nbsp;Steps:</i>
                                    <ol class="flow-text">
                                        {% for step in recipe.steps %}
                                        <li>
                                            <p>{{ step }}</p>
                                        </li>
                                        {% endfor %}
                                    </ol>
                                </div>
                                <div class="chip vertical-align flow-text">
                                    <img src="{{ url_for('static', filename='images/bluethemedark.png') }}" alt="user avatar">
                                        {{ recipe.created_by }}
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</section>
{% endif %}
{% endfor %}


{% endblock %}